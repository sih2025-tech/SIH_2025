<!DOCTYPE html>
<html>
<body>
<h2>Translator & TTS Test</h2>

<input type="text" id="textInput" placeholder="Type something">
<button onclick="translate()">Translate</button>
<button onclick="speak()">TTS</button>

<p id="translation"></p>

<script>
function translate() {
    const inputText = document.getElementById("textInput").value.trim();

    fetch("http://127.0.0.1:5000/translator/translate", {  // <-- port 5000
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text: inputText })
    })
    .then(response => response.json())
    .then(data => {
        console.log("Translation received:", data);
        document.getElementById("translation").innerText = data.translation || "No translation received";
    })
    .catch(err => console.error("Error:", err));
}

function speak() {
    const inputText = document.getElementById("textInput").value;

    fetch("http://127.0.0.1:5000/translator/tts", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text: inputText })
    })
    .then(response => response.blob())
    .then(blob => {
        const url = window.URL.createObjectURL(blob);
        const audio = new Audio(url);
        audio.play();
    })
    .catch(err => console.error(err));
}
</script>
</body>
</html>
